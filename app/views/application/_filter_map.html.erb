<div id="map-container"><div id="map" class="filter-map"></div></div>
<script type="text/javascript">
  var markers = new Tennis.Collections.MarkerCollection(
    <%== objects.map do |s|
          {
            icon: asset_path(stadium_get_category_icon(s)),
            position: {
              lat: s.latitude.to_f,
              lng: s.longitude.to_f
            },
            name: s.name,  
            infowindow: "#{s.name}<br>#{link_to 'Перейти на страницу', s}"
          }
        end.to_json %>
      );
  var map = new Tennis.Views.MapView({collection: markers});
  window.names = markers.models.map(function(el){return el.attributes.name});
  map.render();
  $('#q_name_cont').autocomplete({
      source: window.names
    });
</script>


