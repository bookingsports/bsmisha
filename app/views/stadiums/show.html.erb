<% breadcrumb :stadium, @stadium %>

<div class="body-bg">
  <div class="row">
    <div class="entry">
      <h1><span class="title-tire">–</span> <%= @stadium.name %> <span class="title-tire">–</span></h1>
      <hr>
      <div class="row">
	      <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
					<div role="tabpanel">
					  <!-- Nav tabs -->
					  <ul class="nav nav-tabs nav-justified" role="tablist">
					    <li role="presentation" class="active"><a href="#home" aria-controls="home" role="tab" data-toggle="tab">Описание</a></li>
					    <li role="presentation" class=""><a href="#grid" aria-controls="grid" role="tab" data-toggle="tab">Расписание</a></li>
					    <li role="presentation"><a href="#photos" aria-controls="photos" role="tab" data-toggle="tab">Галерея</a></li>
					    <li role="presentation"><a href="#reviews" aria-controls="reviews" role="tab" data-toggle="tab">Отзывы</a></li>
					  </ul>

					  <!-- Tab panes -->
					  <div class="tab-content">
					    <div role="tabpanel" class="tab-pane active" id="home">
					    	<div class="row">
			    	    <%= javascript_include_tag '//maps.google.com/maps/api/js?v=3.13&amp;sensor=false' %>
				    	    <%= javascript_include_tag '//google-maps-utility-library-v3.googlecode.com/svn/tags/markerclustererplus/2.0.14/src/markerclusterer_packed.js' %>
				    	    <div class="product-subheader">
							    <div id="map" class="product-map"></div>
							    <div class="product-image">
							    <div class="address"><%= @stadium.address %><p class="tel_field"><tel>Тел.: <%= @stadium.phone %></tel></p></div><%# image %></div>
							    </div>
					    	    <script type="text/javascript">
					    	      var markers = new Tennis.Collections.MarkerCollection([<%== @stadium.to_json %>]);
					    	      var map = new Tennis.Views.MapView({collection: markers});
					    	      map.render();
					    	    </script>
					    		<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
					    			<p>
					    				<%= @stadium.description %>
					    			</p>
					    		</div>
					    	</div>
					    </div>
					    <div role="tabpanel" class="tab-pane" id="grid">
					    	<div class="row top30">
					    		<div class="col-xs-12">
						    		<%= label_tag "Выберите корт" %>
				    				<%= select_tag :court, options_for_select(@stadium.courts.map {|c| [c.name, c.id, { data: {source: events_path(court_id: c), price: c.price, change_price: c.change_price } } ] }), class: 'form-control' %>
			    				</div>
					    		<div class="col-xs-12 col-sm-12">
							    	<div data-grid data-source="<%= events_path %>"></div>
							    	
					    		</div>
				    		</div>
				    		<div class="row top30">
					    		<div class="col-xs-12 col-sm-6">
						    		<div class="panel panel-default">
				    				  <div class="panel-heading">
				    						<h3 class="panel-title">Бронирование</h3>
				    				  </div>
				    				  <div class="panel-body woocommerce" data-checkout>
				    				  	<%= render "orders/total" %>
				    				  </div>
					    			</div>
				    			</div>
				    			<div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
				    				<%= render 'orders/changes_total' %>
				    			</div>
					    		</div>
				    				  <script type="text/javascript">
				    				  kendo.culture("ru-RU");
								    	var grid = new Tennis.Views.ScheduleView({el: '[data-grid]'});
								    	var changes = new Tennis.Collections.Changes();
								    	var checkout = new Tennis.Views.CheckoutView({el: '[data-checkout]'});
								    	var changesView = new Tennis.Views.ChangesView({el: '[data-event-move]', collection: changes});
								    	grid.render();
							    	</script>
					    	</div>
					    <div role="tabpanel" class="tab-pane" id="photos">
					    </div>
					    <div role="tabpanel" class="tab-pane" id="reviews">...</div>
					  </div>

					</div>
			  </div>
      </div>
    </div>
  </div>
</div>